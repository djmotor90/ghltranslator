# GHL Translator Integration - Directory Structure

## Complete Project Structure

```
ghl-translator/
â”‚
â”œâ”€â”€ ğŸ“„ Configuration Files
â”‚   â”œâ”€â”€ .env.example                 # Environment variables template
â”‚   â”œâ”€â”€ .env                         # (Create from .env.example)
â”‚   â”œâ”€â”€ .gitignore                  # Git ignore rules
â”‚   â”œâ”€â”€ package.json                # Dependencies & scripts
â”‚   â”œâ”€â”€ package-lock.json           # Dependency lock file
â”‚   â”œâ”€â”€ tsconfig.json               # TypeScript configuration
â”‚   â”œâ”€â”€ Dockerfile                  # Production Docker image
â”‚   â”œâ”€â”€ Dockerfile.multi            # Multi-stage Docker build
â”‚   â””â”€â”€ docker-compose.yml          # Local development stack
â”‚
â”œâ”€â”€ ğŸ“š Documentation
â”‚   â”œâ”€â”€ README.md                   # Project overview & features
â”‚   â”œâ”€â”€ GETTING_STARTED.md          # Quick start & development guide
â”‚   â”œâ”€â”€ MARKETPLACE.md              # Marketplace submission & API docs
â”‚   â”œâ”€â”€ PROJECT_SUMMARY.md          # Project summary & next steps
â”‚   â”œâ”€â”€ CHECKLIST.md                # Complete checklist
â”‚   â””â”€â”€ DIRECTORY_STRUCTURE.md      # This file
â”‚
â”œâ”€â”€ ğŸ”§ Setup Scripts
â”‚   â””â”€â”€ setup.sh                    # Automated setup script
â”‚
â”œâ”€â”€ ğŸ“ .github/
â”‚   â”œâ”€â”€ copilot-instructions.md    # GitHub Copilot configuration
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ ci-cd.yml              # GitHub Actions CI/CD pipeline
â”‚
â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚
â”‚   â”œâ”€â”€ index.ts                    # Main application entry point
â”‚   â”‚
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ env.ts                 # Environment configuration
â”‚   â”‚   â””â”€â”€ database.ts            # MongoDB connection setup
â”‚   â”‚
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ User.ts                # User model (OAuth accounts)
â”‚   â”‚   â”œâ”€â”€ Integration.ts         # GHL account integration model
â”‚   â”‚   â””â”€â”€ Translation.ts         # Translation entries model
â”‚   â”‚
â”‚   â”œâ”€â”€ controllers/               # Request handlers
â”‚   â”‚   â”œâ”€â”€ authController.ts      # OAuth & authentication
â”‚   â”‚   â”œâ”€â”€ accountController.ts   # Account management (CRUD)
â”‚   â”‚   â””â”€â”€ translationController.ts # Translation management
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                  # Business logic layer
â”‚   â”‚   â”œâ”€â”€ authService.ts         # User auth operations
â”‚   â”‚   â”œâ”€â”€ ghlService.ts          # GHL API interactions
â”‚   â”‚   â””â”€â”€ translationService.ts  # Translation engine & caching
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/                    # API route definitions
â”‚   â”‚   â”œâ”€â”€ auth.ts                # Authentication routes
â”‚   â”‚   â”œâ”€â”€ accounts.ts            # Account management routes
â”‚   â”‚   â””â”€â”€ translations.ts        # Translation management routes
â”‚   â”‚
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â””â”€â”€ auth.ts                # JWT auth & error handling
â”‚   â”‚
â”‚   â”œâ”€â”€ translations/              # Language files
â”‚   â”‚   â”œâ”€â”€ en.json               # English translations (base)
â”‚   â”‚   â””â”€â”€ ru.json               # Russian translations
â”‚   â”‚
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ logger.ts              # Logging utility
â”‚
â”œâ”€â”€ ğŸ“ dist/                       # Compiled JavaScript (generated)
â”‚   â””â”€â”€ (Auto-generated by TypeScript compiler)
â”‚
â”œâ”€â”€ ğŸ“ public/                     # Static files placeholder
â”‚   â””â”€â”€ (For frontend assets, API docs, etc.)
â”‚
â”œâ”€â”€ ğŸ“ tests/                      # Test files placeholder
â”‚   â””â”€â”€ (Unit & integration tests)
â”‚
â””â”€â”€ ğŸ“ node_modules/              # Dependencies (generated)
    â””â”€â”€ (Auto-installed by npm install)
```

## File Organization by Function

### ğŸ” Authentication Flow
```
routes/auth.ts                    â†’ authController.ts
                                  â†’ authService.ts
                                  â†’ models/User.ts
                                  â†’ config/database.ts
```

### ğŸ“Š Account Management
```
routes/accounts.ts                â†’ accountController.ts
                                  â†’ services/translationService.ts
                                  â†’ models/Integration.ts
                                  â†’ config/database.ts
```

### ğŸŒ Translation Engine
```
routes/translations.ts            â†’ translationController.ts
                                  â†’ services/translationService.ts
                                  â†’ models/Translation.ts
                                  â†’ services/ghlService.ts
                                  â†’ config/database.ts
```

## API Endpoint Structure

```
/api/
â”œâ”€â”€ /auth/
â”‚   â”œâ”€â”€ GET /login                 # Start OAuth flow
â”‚   â”œâ”€â”€ GET /callback              # OAuth callback
â”‚   â”œâ”€â”€ POST /logout               # Logout (protected)
â”‚   â””â”€â”€ GET /me                    # Current user (protected)
â”‚
â”œâ”€â”€ /accounts/                     # All protected
â”‚   â”œâ”€â”€ GET /                      # List user's accounts
â”‚   â”œâ”€â”€ POST /                     # Create new account
â”‚   â”œâ”€â”€ GET /:id                   # Get account details
â”‚   â”œâ”€â”€ PUT /:id                   # Update account settings
â”‚   â”œâ”€â”€ DELETE /:id                # Delete/disconnect account
â”‚   â””â”€â”€ GET /:id/status            # Get sync status
â”‚
â””â”€â”€ /translations/                 # All protected
    â”œâ”€â”€ GET /:accountId            # Get translations
    â”œâ”€â”€ POST /:accountId           # Add translation
    â”œâ”€â”€ POST /:accountId/import    # Bulk import
    â””â”€â”€ GET /:accountId/stats      # Get statistics
```

## Database Schema Structure

### User Collection
```
{
  _id: ObjectId
  email: String (unique)
  ghlId: String (unique)
  accessToken: String
  refreshToken: String
  name: String
  avatar: String
  language: "en" | "ru"
  createdAt: Date
  updatedAt: Date
}
```

### Integration Collection
```
{
  _id: ObjectId
  userId: ObjectId (ref: User)
  accountId: String
  accountName: String
  ghlAccountId: String (unique)
  status: "active" | "inactive" | "error"
  translationEnabled: Boolean
  preferredLanguage: "en" | "ru"
  webhookUrl: String
  webhookSecret: String
  lastSyncedAt: Date
  errorMessage: String
  settings: {
    translateDashboard: Boolean
    translateEmails: Boolean
    translateReports: Boolean
    customTranslations: Object
  }
  createdAt: Date
  updatedAt: Date
}
```

### Translation Collection
```
{
  _id: ObjectId
  integrationId: ObjectId (ref: Integration)
  key: String
  english: String
  russian: String
  category: "ui" | "email" | "report" | "notification" | "other"
  approved: Boolean
  source: "system" | "user" | "crowdsourced"
  votes: Number
  lastUpdatedBy: ObjectId (ref: User)
  createdAt: Date
  updatedAt: Date
}
```

## Configuration Files

### package.json
- Defines all dependencies
- Defines build, dev, test scripts
- Defines Docker build configuration

### .env.example
- All required environment variables
- Default values where applicable
- Documentation for each variable

### tsconfig.json
- TypeScript compilation settings
- Path aliases for clean imports
- ES2020 target with DOM support

### docker-compose.yml
- MongoDB service (port 27017)
- Redis service (port 6379)
- Application service (port 3001)
- Network and volume setup

## Development Workflow

```
1. Edit code in src/
   â†“
2. npm run dev (watches and rebuilds)
   â†“
3. Server reloads automatically
   â†“
4. Test with API calls
   â†“
5. View logs in terminal
   â†“
6. Make changes, repeat
```

## Build & Deployment Workflow

```
1. npm run build       # Compiles TypeScript
   â†“ generates dist/
   â†“
2. npm start           # Runs compiled code
   â†“
3. Or: Docker build    # Creates image
   â†“
4. docker run          # Deploys container
```

## Key Technology Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         HTTP Client / Browser           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Express.js (Routing & Middleware)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Controllers (Request Logic)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Services (Business Logic)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ authService       â€¢ ghlService        â”‚
â”‚ â€¢ translationService                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Models (Data Validation)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ User  â€¢ Integration  â€¢ Translation    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    MongoDB (Data Persistence)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Collections: users, integrations, ...   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Important Port Mappings

| Service | Port | Purpose |
|---------|------|---------|
| Application | 3001 | Main API server |
| MongoDB | 27017 | Database |
| Redis | 6379 | Caching |
| Docker App | 3001 | Container app |

## Important File Sizes (Approx)

| File | Size | Purpose |
|------|------|---------|
| package-lock.json | 266 KB | Dependency lock |
| .github/workflows/ci-cd.yml | 2 KB | CI/CD config |
| MARKETPLACE.md | 9 KB | API documentation |
| GETTING_STARTED.md | 10 KB | Development guide |
| README.md | 6 KB | Project overview |

## Configuration Hierarchy

```
Environment Variables (.env)
         â†“
config/env.ts (loads & validates)
         â†“
Application uses config
```

---

**For more details on each component:**
- See code comments in `src/` files
- Read `GETTING_STARTED.md` for development
- Read `MARKETPLACE.md` for API documentation
- Read `README.md` for project overview

**Last Updated**: November 12, 2025
